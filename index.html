<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Laporan Shift - KP Garung Tambak</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  :root {
    --bg-main: #050718;
    --bg-card: rgba(10, 12, 32, 0.98);
    --bg-card-soft: rgba(18, 22, 52, 0.98);
    --text-main: #f8f8ff;
    --text-muted: #a6add8;
    --neon-primary: #4f8cff;
    --neon-secondary: #a855ff;
    --border-soft: #262b4a;
    --font-main: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    --font-mono: "SF Mono", Menlo, Monaco, Consolas, "Courier New", monospace;
  }

  /* THEME: LIGHT MODE OVERRIDES */
  body.light {
    --bg-main: #eef1ff;
    --bg-card: #ffffff;
    --bg-card-soft: #ffffff;
    --text-main: #141621;
    --text-muted: #6a6f90;
    --border-soft: #d9ddf4;
    background:
      radial-gradient(circle at top left, rgba(79, 140, 255, 0.14), transparent 55%),
      radial-gradient(circle at bottom right, rgba(168, 85, 255, 0.16), transparent 60%),
      linear-gradient(135deg, #eef1ff, #ffffff);
    color: var(--text-main);
  }

  body {
    margin: 0;
    padding: 16px;
    background:
      radial-gradient(circle at top left, rgba(79, 140, 255, 0.35), transparent 55%),
      radial-gradient(circle at bottom right, rgba(168, 85, 255, 0.28), transparent 60%),
      radial-gradient(circle at center, #050718, #050210);
    font-family: var(--font-main);
    color: var(--text-main);
  }

  .wrap {
    max-width: 980px;
    margin: 0 auto 40px auto;
    position: relative;
  }

  .wrap::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0;
    background-image: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.03) 1px,
      transparent 1px
    );
    background-size: 100% 3px;
    opacity: 0.10;
    mix-blend-mode: soft-light;
  }

  /* HEADER */
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    margin-bottom: 10px;
    position: relative;
    z-index: 1;
  }

  .brand-block {
    display: flex;
    gap: 14px;
    align-items: center;
  }

  .logo-alfamart {
    padding: 6px 14px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.12);
    background:
      radial-gradient(circle at 20% 0%, rgba(255, 255, 255, 0.16), transparent 55%),
      linear-gradient(135deg, #111632, #050718);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .logo-alfamart img {
    height: 32px;
    display: block;
  }

  .brand-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .brand-title {
    font-size: 18px;
    font-weight: 900;
    letter-spacing: 0.20em;
    text-transform: uppercase;
    color: var(--text-main);
    text-shadow:
      0 0 10px rgba(0, 0, 0, 0.6),
      0 0 16px rgba(79, 140, 255, 0.55);
  }

  .brand-sub {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.16em;
    color: var(--text-muted);
  }

  /* THEME TOGGLE */
  .toggle-theme {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(10, 12, 32, 0.96);
    cursor: pointer;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--text-muted);
  }

  body.light .toggle-theme {
    background: #ffffff;
    border-color: rgba(0, 0, 0, 0.08);
  }

  .toggle-pill {
    width: 36px;
    height: 16px;
    border-radius: 999px;
    background: linear-gradient(135deg, var(--neon-primary), var(--neon-secondary));
    position: relative;
  }

  .toggle-knob {
    width: 14px;
    height: 14px;
    border-radius: 999px;
    background: #050713;
    position: absolute;
    top: 1px;
    left: 2px;
    transition: transform 0.25s ease, background 0.25s ease;
  }

  body.light .toggle-knob {
    transform: translateX(16px);
    background: #fdfcff;
  }

  .mode-label {
    white-space: nowrap;
  }

  /* HAMBURGER MENU (now non-fixed, ga nutup judul) */
  .hamburger {
    position: relative;
    z-index: 2;
    background: rgba(10, 12, 32, 0.96);
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    padding: 6px 10px;
    font-size: 14px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 10px;
  }

  .hamburger span.label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.16em;
    color: var(--text-muted);
  }

  body.light .hamburger {
    background: #ffffff;
    border-color: rgba(0,0,0,0.08);
  }

  .menu-panel {
    position: fixed;
    top: 0;
    left: 0;
    width: 82%;
    max-width: 320px;
    height: 100vh;
    background: rgba(5, 7, 24, 0.98);
    border-right: 1px solid rgba(255, 255, 255, 0.14);
    transform: translateX(-100%);
    transition: transform 0.25s ease;
    padding: 14px;
    z-index: 1000;
  }

  body.light .menu-panel {
    background: #ffffff;
    color: var(--text-main);
  }

  .menu-panel.open {
    transform: translateX(0);
  }

  .menu-title {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--text-muted);
    margin-bottom: 8px;
  }

  .menu-item {
    padding: 7px 9px;
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.16);
    margin-bottom: 6px;
    font-size: 13px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .menu-item:hover {
    background: rgba(24, 32, 80, 0.96);
  }

  body.light .menu-item:hover {
    background: #eef1ff;
  }

  .menu-item span.icon {
    font-size: 16px;
  }

  .menu-footer {
    margin-top: 10px;
    font-size: 12px;
    color: var(--text-muted);
    border-top: 1px solid rgba(255, 255, 255, 0.16);
    padding-top: 8px;
  }

  .divider-neon {
    height: 2px;
    border-radius: 999px;
    background: linear-gradient(90deg, transparent, var(--neon-primary), var(--neon-secondary), transparent);
    box-shadow:
      0 0 14px rgba(79, 140, 255, 0.55),
      0 0 14px rgba(168, 85, 255, 0.55);
    margin-bottom: 12px;
    position: relative;
    z-index: 1;
  }

  /* SECTION NAV (CHIPS) */
  .section-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 10px;
    position: relative;
    z-index: 1;
  }

  .nav-chip {
    border: 1px solid rgba(255, 255, 255, 0.16);
    border-radius: 999px;
    padding: 5px 9px;
    font-size: 10px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    background: rgba(12, 15, 44, 0.96);
    color: var(--text-muted);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }

  .nav-chip span.icon {
    font-size: 12px;
  }

  .nav-chip:hover {
    color: #fff;
    box-shadow: 0 0 10px rgba(79, 140, 255, 0.6);
  }

  .nav-chip.active {
    background: linear-gradient(135deg, var(--neon-primary), var(--neon-secondary));
    color: #050718;
  }

  body.light .nav-chip {
    background: #ffffff;
    border-color: rgba(0,0,0,0.08);
  }

  /* CARDS */
  .card {
    position: relative;
    background:
      radial-gradient(circle at top left, rgba(255, 255, 255, 0.04), transparent 60%),
      radial-gradient(circle at bottom right, rgba(79, 140, 255, 0.16), transparent 70%),
      var(--bg-card);
    border-radius: 18px;
    padding: 14px 14px 12px 14px;
    border: 1px solid var(--border-soft);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
    margin-bottom: 12px;
    z-index: 1;
  }

  body.light .card {
    background:
      radial-gradient(circle at top left, rgba(79, 140, 255, 0.04), transparent 60%),
      radial-gradient(circle at bottom right, rgba(168, 85, 255, 0.05), transparent 70%),
      var(--bg-card-soft);
    box-shadow: 0 6px 18px rgba(15, 23, 42, 0.08);
  }

  .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    margin-bottom: 8px;
  }

  .card-title {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.20em;
    color: var(--text-muted);
  }

  .card-title strong {
    color: var(--neon-primary);
  }

  .badge-kpi {
    font-size: 10px;
    padding: 2px 9px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.16);
    color: var(--text-muted);
    background: rgba(12, 15, 44, 0.9);
  }

  .grid-2 {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px 12px;
  }

  @media (max-width: 720px) {
    .header {
      flex-direction: column;
      align-items: flex-start;
    }
    .grid-2 {
      grid-template-columns: 1fr;
    }
  }

  label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    margin-bottom: 4px;
    display: block;
    color: var(--text-muted);
  }

  input[type="text"],
  input[type="number"],
  input[type="date"],
  select {
    width: 100%;
    padding: 7px 9px;
    border-radius: 10px;
    border: 1px solid var(--border-soft);
    background: rgba(8, 10, 30, 0.96);
    color: var(--text-main);
    font-size: 12px;
    outline: none;
  }

  input[type="text"]:focus,
  input[type="number"]:focus,
  input[type="date"]:focus,
  select:focus {
    border-color: var(--neon-primary);
    box-shadow: 0 0 10px rgba(79, 140, 255, 0.55);
  }

  body.light input[type="text"],
  body.light input[type="number"],
  body.light input[type="date"],
  body.light select {
    background: #f8f8ff;
    color: #141621;
  }

  .note {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 6px;
  }

  .kpi-row {
    border-left: 3px solid var(--neon-primary);
    padding-left: 10px;
  }

  .kpi-row.yellow {
    border-left-color: var(--neon-secondary);
  }

  .kpi-name {
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.20em;
    text-transform: uppercase;
    margin-bottom: 6px;
    color: var(--neon-primary);
  }

  /* BUTTONS */
  .btn-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 8px;
  }

  button {
    border: none;
    cursor: pointer;
    font-size: 12px;
    padding: 8px 14px;
    border-radius: 999px;
    font-weight: 600;
    letter-spacing: 0.10em;
    text-transform: uppercase;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    position: relative;
    overflow: hidden;
  }

  button span.icon {
    font-size: 13px;
  }

  .btn-red {
    background: linear-gradient(135deg, #4f8cff, #2b5fbf);
    color: #fdfdff;
    box-shadow: 0 0 14px rgba(79, 140, 255, 0.7);
  }

  .btn-yellow {
    background: linear-gradient(135deg, #a855ff, #6d28d9);
    color: #fdfdff;
    box-shadow: 0 0 14px rgba(168, 85, 255, 0.7);
  }

  .btn-wa {
    background: linear-gradient(135deg, #00c96f, #008c48);
    color: #f5fff9;
    box-shadow: 0 0 14px rgba(0, 201, 111, 0.75);
  }

  button:hover {
    opacity: 0.96;
    transform: translateY(-1px);
  }

  button:active {
    transform: translateY(1px);
    box-shadow: none;
    opacity: 0.9;
  }

  textarea {
    width: 100%;
    min-height: 260px;
    padding: 10px 10px;
    border-radius: 12px;
    border: 1px solid var(--border-soft);
    background:
      radial-gradient(circle at top left, rgba(79, 140, 255, 0.12), transparent 70%),
      radial-gradient(circle at bottom right, rgba(168, 85, 255, 0.10), transparent 70%),
      rgba(6, 8, 28, 0.98);
    color: var(--text-main);
    font-size: 12px;
    font-family: var(--font-mono);
    white-space: pre-wrap;
    resize: vertical;
    outline: none;
  }

  body.light textarea {
    background:
      radial-gradient(circle at top left, rgba(79, 140, 255, 0.06), transparent 70%),
      radial-gradient(circle at bottom right, rgba(168, 85, 255, 0.05), transparent 70%),
      #fdfdff;
    color: #141621;
  }

  /* FOOTER */
  .footer {
    margin-top: 22px;
    padding-top: 10px;
    border-top: 1px solid rgba(255, 255, 255, 0.14);
    text-align: center;
    font-size: 11px;
    color: var(--text-muted);
    position: relative;
    z-index: 1;
  }

  .footer-main {
    margin-bottom: 3px;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    background: linear-gradient(90deg, var(--neon-primary), var(--neon-secondary));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow:
      0 0 10px rgba(79, 140, 255, 0.7),
      0 0 10px rgba(168, 85, 255, 0.7);
  }

  .footer-sub {
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }
  </style>
</head>
<body>

<div class="wrap">
  <!-- HAMBURGER (sekarang tidak nutup judul) -->
  <div class="hamburger" onclick="toggleMenu()">
    <span>‚ò∞</span>
    <span class="label">Menu Laporan Shift</span>
  </div>

  <!-- HEADER -->
  <div class="header">
    <div class="brand-block">
      <div class="logo-alfamart">
        <img src="alfamart-logo.png" alt="Alfamart">
      </div>
      <div class="brand-text">
        <div class="brand-title">KP GARUNG TAMBAK</div>
        <div class="brand-sub">Laporan Per Shift ‚Äî 2G44</div>
      </div>
    </div>

    <!-- THEME TOGGLE -->
    <button class="toggle-theme" id="themeToggle" type="button">
      <div class="toggle-pill">
        <div class="toggle-knob"></div>
      </div>
      <span class="mode-label">Dark Mode</span>
    </button>
  </div>

  <!-- MENU PANEL -->
  <div id="menuPanel" class="menu-panel">
    <div class="menu-title">Menu Laporan Shift</div>

    <div class="menu-item" onclick="goSection('section-panduan')">
      <span class="icon">üìò</span><span>Panduan Pengisian</span>
    </div>
    <div class="menu-item" onclick="goSection('section-umum')">
      <span class="icon">üßæ</span><span>Data Umum</span>
    </div>
    <div class="menu-item" onclick="goSection('section-sales')">
      <span class="icon">üí∞</span><span>Sales</span>
    </div>
    <div class="menu-item" onclick="goSection('section-program')">
      <span class="icon">üõí</span><span>Program Penjualan</span>
    </div>
    <div class="menu-item" onclick="goSection('section-member')">
      <span class="icon">üßë‚Äçü§ù‚Äçüßë</span><span>Member & Loyalty</span>
    </div>
    <div class="menu-item" onclick="goSection('section-sku')">
      <span class="icon">‚≠ê</span><span>SKU Fokus</span>
    </div>
    <div class="menu-item" onclick="goSection('section-output')">
      <span class="icon">üì§</span><span>Output Laporan</span>
    </div>
    <div class="menu-item" onclick="goSection('section-motivasi')">
      <span class="icon">‚ú®</span><span>Motivasi Shift</span>
    </div>

    <div class="menu-footer">
      ‚ÄúKerja hebat bukan dari yang paling cepat, tapi dari yang paling konsisten.‚Äù
    </div>
  </div>

  <div class="divider-neon"></div>

  <!-- SECTION NAV (CHIPS) -->
  <div class="section-nav">
    <button class="nav-chip" onclick="goSection('section-panduan')"><span class="icon">üìò</span><span>Panduan</span></button>
    <button class="nav-chip" onclick="goSection('section-umum')"><span class="icon">üßæ</span><span>Data Umum</span></button>
    <button class="nav-chip" onclick="goSection('section-sales')"><span class="icon">üí∞</span><span>Sales</span></button>
    <button class="nav-chip" onclick="goSection('section-program')"><span class="icon">üõí</span><span>Program</span></button>
    <button class="nav-chip" onclick="goSection('section-member')"><span class="icon">üßë‚Äçü§ù‚Äçüßë</span><span>Member</span></button>
    <button class="nav-chip" onclick="goSection('section-sku')"><span class="icon">‚≠ê</span><span>SKU Fokus</span></button>
    <button class="nav-chip" onclick="goSection('section-output')"><span class="icon">üì§</span><span>Output</span></button>
    <button class="nav-chip" onclick="goSection('section-motivasi')"><span class="icon">‚ú®</span><span>Motivasi</span></button>
  </div>

  <!-- PANDUAN -->
  <div class="card" id="section-panduan">
    <div class="card-header">
      <div class="card-title"><strong>Panduan</strong> ¬∑ Tata Cara Pengisian</div>
      <span class="badge-kpi">Guide</span>
    </div>
    <div style="font-size:12px;">
      1. Isi <strong>kode toko, nama toko, tanggal, pejabat, kasir dan shift</strong> yang dijaga.<br>
      2. Untuk setiap KPI, isi <strong>ACTUAL</strong> sesuai hasil penjualan shift tersebut.<br>
      3. Angka boleh ditulis tanpa titik (contoh: 3520000), sistem akan memformat otomatis.<br>
      4. Klik <strong>Generate Laporan</strong> untuk membuat teks laporan versi WA.<br>
      5. Periksa kembali laporan di kotak bawah. Jika ada yang salah, ubah angka lalu klik Generate lagi.<br>
      6. Jika sudah sesuai, klik <strong>Copy Laporan</strong> ‚Üí klik <strong>Kirim ke Grup WA</strong> ‚Üí Paste di grup.<br>
      7. GAP akan tampil dengan tanda <strong>+</strong> atau <strong>-</strong> dan memakai titik ribuan (contoh: -1.222.119).
    </div>
  </div>

  <!-- DATA UMUM -->
  <div class="card" id="section-umum">
    <div class="card-header">
      <div class="card-title"><strong>Data Umum</strong> ¬∑ Header Laporan</div>
      <span class="badge-kpi">Umum</span>
    </div>
    <div class="grid-2">
      <div>
        <label>Kode Toko</label>
        <input type="text" id="kodeToko" value="2G44">
      </div>
      <div>
        <label>Nama Toko</label>
        <input type="text" id="namaToko" value="KP. GARUNG TAMBAK">
      </div>
      <div>
        <label>Tanggal</label>
        <input type="date" id="tanggal">
      </div>
      <div>
        <label>Pejabat</label>
        <input type="text" id="pejabat">
      </div>
      <div>
        <label>Kasir</label>
        <input type="text" id="kasir">
      </div>
      <div>
        <label>Shift</label>
        <select id="shift">
          <option value="1">Shift 1</option>
          <option value="2">Shift 2</option>
        </select>
      </div>
    </div>
    <p class="note">Shift yang dipilih akan menentukan target shift yang dipakai untuk perhitungan ACV dan GAP.</p>
  </div>

  <!-- SALES -->
  <div class="card" id="section-sales">
    <div class="card-header">
      <div class="card-title"><strong>Sales</strong> ¬∑ Target & Actual</div>
      <span class="badge-kpi">SALES</span>
    </div>
    <div class="kpi-row">
      <div class="kpi-name">SALES</div>
      <div class="grid-2">
        <div>
          <label>Target Shift 1 (Rp)</label>
          <input type="number" id="salesTarget1" value="3520000">
        </div>
        <div>
          <label>Target Shift 2 (Rp)</label>
          <input type="number" id="salesTarget2" value="5280000">
        </div>
        <div>
          <label>Actual (Rp)</label>
          <input type="number" id="salesActual" placeholder="contoh: 3000000">
        </div>
      </div>
      <p class="note">Isi angka tanpa titik. Contoh: 3520000, bukan 3.520.000.</p>
    </div>
  </div>

  <!-- PROGRAM PENJUALAN -->
  <div class="card" id="section-program">
    <div class="card-header">
      <div class="card-title"><strong>Program Penjualan</strong> ¬∑ PSM ¬∑ PWP ¬∑ Serba Gratis ¬∑ Pulsa</div>
      <span class="badge-kpi">Program</span>
    </div>

    <!-- PSM -->
    <div class="kpi-row">
      <div class="kpi-name">PSM</div>
      <div class="grid-2">
        <div>
          <label>Target QTY Shift 1</label>
          <input type="number" id="psmTarget1" value="15">
        </div>
        <div>
          <label>Target QTY Shift 2</label>
          <input type="number" id="psmTarget2" value="25">
        </div>
        <div>
          <label>Actual QTY</label>
          <input type="number" id="psmActual">
        </div>
      </div>
    </div>
    <br>

    <!-- PWP -->
    <div class="kpi-row yellow">
      <div class="kpi-name">PWP</div>
      <div class="grid-2">
        <div>
          <label>Target QTY Shift 1</label>
          <input type="number" id="pwpTarget1" value="7">
        </div>
        <div>
          <label>Target QTY Shift 2</label>
          <input type="number" id="pwpTarget2" value="15">
        </div>
        <div>
          <label>Actual QTY</label>
          <input type="number" id="pwpActual">
        </div>
      </div>
    </div>
    <br>

    <!-- SERBA GRATIS -->
    <div class="kpi-row">
      <div class="kpi-name">SERBA GRATIS</div>
      <div class="grid-2">
        <div>
          <label>Target Paket Shift 1</label>
          <input type="number" id="sgTarget1" value="9">
        </div>
        <div>
          <label>Target Paket Shift 2</label>
          <input type="number" id="sgTarget2" value="15">
        </div>
        <div>
          <label>Actual Paket</label>
          <input type="number" id="sgActual">
        </div>
      </div>
    </div>
    <br>

    <!-- PULSA / PAKET -->
    <div class="kpi-row yellow">
      <div class="kpi-name">PULSA / PAKET</div>
      <div class="grid-2">
        <div>
          <label>Target Rp Shift 1</label>
          <input type="number" id="pulsaTarget1" value="200000">
        </div>
        <div>
          <label>Target Rp Shift 2</label>
          <input type="number" id="pulsaTarget2" value="200000">
        </div>
        <div>
          <label>Actual (Rp)</label>
          <input type="number" id="pulsaActual">
        </div>
      </div>
    </div>
  </div>

  <!-- MEMBER & LOYALTY -->
  <div class="card" id="section-member">
    <div class="card-header">
      <div class="card-title"><strong>Member & Loyalty</strong> ¬∑ Struk Member ¬∑ New Member</div>
      <span class="badge-kpi">Member</span>
    </div>

    <!-- STRUK MEMBER -->
    <div class="kpi-row">
      <div class="kpi-name">STRUK MEMBER</div>
      <div class="grid-2">
        <div>
          <label>Jumlah Struk</label>
          <input type="number" id="strukTotal">
        </div>
        <div>
          <label>Struk Member</label>
          <input type="number" id="strukMember">
        </div>
      </div>
      <p class="note">ACV% = Struk Member √∑ Jumlah Struk.</p>
    </div>
    <br>

    <!-- NEW MEMBER -->
    <div class="kpi-row yellow">
      <div class="kpi-name">NEW MEMBER</div>
      <div class="grid-2">
        <div>
          <label>Target</label>
          <input type="number" id="nmTarget" value="1">
        </div>
        <div>
          <label>Actual</label>
          <input type="number" id="nmActual">
        </div>
      </div>
    </div>
  </div>

  <!-- SKU FOKUS -->
  <div class="card" id="section-sku">
    <div class="card-header">
      <div class="card-title"><strong>SKU Fokus</strong> ¬∑ Seger ¬∑ Cemilan Ceban</div>
      <span class="badge-kpi">SKU</span>
    </div>

    <div class="kpi-row">
      <div class="kpi-name">SEGER</div>
      <div class="grid-2">
        <div>
          <label>Target</label>
          <input type="number" id="segerTarget" value="15">
        </div>
        <div>
          <label>Actual</label>
          <input type="number" id="segerActual">
        </div>
      </div>
    </div>
    <br>

    <div class="kpi-row yellow">
      <div class="kpi-name">CEMILAN CEBAN</div>
      <div class="grid-2">
        <div>
          <label>Target</label>
          <input type="number" id="cemilanTarget" value="10">
        </div>
        <div>
          <label>Actual</label>
          <input type="number" id="cemilanActual">
        </div>
      </div>
    </div>
  </div>

  <!-- OUTPUT -->
  <div class="card" id="section-output">
    <div class="card-header">
      <div class="card-title"><strong>Output</strong> ¬∑ Laporan Siap Kirim WA</div>
      <span class="badge-kpi">Shift Report</span>
    </div>
    <div class="btn-row">
      <button type="button" class="btn-red" onclick="generateLaporan()">
        <span class="icon">‚ö°</span><span>Generate Laporan</span>
      </button>
      <button type="button" class="btn-yellow" onclick="copyLaporan()">
        <span class="icon">üìã</span><span>Copy Laporan</span>
      </button>
      <button type="button" class="btn-wa" onclick="openWhatsAppGroup()">
        <span class="icon">üü¢</span><span>Kirim ke Grup WA</span>
      </button>
    </div>
    <textarea id="outputText" placeholder="Klik 'Generate Laporan' lalu copy dan kirim ke grup WA..."></textarea>
  </div>

  <!-- MOTIVASI -->
  <div class="card" id="section-motivasi">
    <div class="card-header">
      <div class="card-title"><strong>Motivasi Shift</strong></div>
      <span class="badge-kpi">Motivasi</span>
    </div>
    <div style="font-size:12px;">
      ‚ÄúKerja hebat bukan dari yang paling cepat, tapi dari yang paling konsisten.‚Äù<br><br>
      ‚ÄúTarget bisa dikejar pelan-pelan. Yang penting jangan berhenti.‚Äù<br><br>
      ‚ÄúSenyummu adalah pelayanan terbaik untuk pelanggan.‚Äù<br><br>
      ‚ÄúToko bagus lahir dari tim yang solid, bukan satu orang saja.‚Äù<br><br>
      ‚ÄúHari ini kita kerja baik ‚Äî besok toko panen hasilnya.‚Äù
    </div>
  </div>

  <!-- FOOTER -->
  <div class="footer">
    <div class="footer-main">¬© KP Garung Tambak ‚Äî 2G44</div>
    <div class="footer-sub">Crafted with ‚ô•</div>
    <div class="footer-sub">By D&amp;D A Digital Creative Studio</div>
  </div>
</div>

<script>
/* THEME TOGGLE */
(function initTheme(){
  const body = document.body;
  const toggle = document.getElementById('themeToggle');
  const label = toggle.querySelector('.mode-label');

  function applyTheme(mode){
    if(mode === 'light'){
      body.classList.add('light');
      label.textContent = 'Light Mode';
    } else {
      body.classList.remove('light');
      label.textContent = 'Dark Mode';
    }
  }

  const saved = localStorage.getItem('reportTheme');
  applyTheme(saved === 'light' ? 'light' : 'dark');

  toggle.addEventListener('click', () => {
    const isLight = body.classList.contains('light');
    const next = isLight ? 'dark' : 'light';
    applyTheme(next);
    localStorage.setItem('reportTheme', next);
  });
})();

/* MENU + NAV */
function toggleMenu() {
  const panel = document.getElementById('menuPanel');
  panel.classList.toggle('open');
}

function goSection(id) {
  const el = document.getElementById(id);
  if (!el) return;
  el.scrollIntoView({ behavior: 'smooth', block: 'start' });
  const panel = document.getElementById('menuPanel');
  panel.classList.remove('open');
}

/* HELPER ANGKA */
function getNum(id) {
  const el = document.getElementById(id);
  if (!el) return 0;
  const raw = (el.value || '').toString().replace(/\./g, '').replace(/,/g, '');
  const n = Number(raw);
  return isNaN(n) ? 0 : n;
}

function formatWithDots(n) {
  const num = Number(n) || 0;
  return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');
}

function formatGap(actual, target) {
  const a = Number(actual) || 0;
  const t = Number(target) || 0;
  const g = a - t;
  if (g === 0) return '0';
  const sign = g > 0 ? '+' : '-';
  const abs = Math.abs(g);
  return sign + formatWithDots(abs);
}

function acv(actual, target) {
  const a = Number(actual) || 0;
  const t = Number(target) || 0;
  if (t <= 0) return 0;
  return Math.round((a / t) * 100);
}

/* GENERATE LAPORAN */
function generateLaporan() {
  const kode = document.getElementById('kodeToko').value || '';
  const nama = document.getElementById('namaToko').value || '';
  const tglRaw = document.getElementById('tanggal').value || '';
  const pejabat = document.getElementById('pejabat').value || '';
  const kasir = document.getElementById('kasir').value || '';
  const shift = document.getElementById('shift').value || '1';

  // format tanggal ke dd-mm-yyyy
  let tanggal = tglRaw;
  if (tglRaw && tglRaw.includes('-')) {
    const p = tglRaw.split('-');
    if (p.length === 3) {
      tanggal = p[2] + '-' + p[1] + '-' + p[0];
    }
  }

  const shNum = Number(shift) || 1;

  // SALES
  const salesT1 = getNum('salesTarget1');
  const salesT2 = getNum('salesTarget2');
  const salesA = getNum('salesActual');
  const salesT = shNum === 1 ? salesT1 : salesT2;
  const salesAcv = acv(salesA, salesT);
  const salesGap = formatGap(salesA, salesT);

  // PSM
  const psmT1 = getNum('psmTarget1');
  const psmT2 = getNum('psmTarget2');
  const psmA = getNum('psmActual');
  const psmT = shNum === 1 ? psmT1 : psmT2;
  const psmAcvVal = acv(psmA, psmT);
  const psmGap = formatGap(psmA, psmT);

  // PWP
  const pwpT1 = getNum('pwpTarget1');
  const pwpT2 = getNum('pwpTarget2');
  const pwpA = getNum('pwpActual');
  const pwpT = shNum === 1 ? pwpT1 : pwpT2;
  const pwpAcvVal = acv(pwpA, pwpT);
  const pwpGap = formatGap(pwpA, pwpT);

  // SERBA GRATIS
  const sgT1 = getNum('sgTarget1');
  const sgT2 = getNum('sgTarget2');
  const sgA = getNum('sgActual');
  const sgT = shNum === 1 ? sgT1 : sgT2;
  const sgAcvVal = acv(sgA, sgT);
  const sgGap = formatGap(sgA, sgT);

  // PULSA
  const pulsaT1 = getNum('pulsaTarget1');
  const pulsaT2 = getNum('pulsaTarget2');
  const pulsaA = getNum('pulsaActual');
  const pulsaT = shNum === 1 ? pulsaT1 : pulsaT2;
  const pulsaAcvVal = acv(pulsaA, pulsaT);
  const pulsaGap = formatGap(pulsaA, pulsaT);

  // STRUK MEMBER
  const strukTotal = getNum('strukTotal');
  const strukMember = getNum('strukMember');
  const smAcv = acv(strukMember, strukTotal);

  // NEW MEMBER
  const nmTarget = getNum('nmTarget');
  const nmActual = getNum('nmActual');
  const nmAcvVal = acv(nmActual, nmTarget);
  const nmGap = formatGap(nmActual, nmTarget);

  // SEGER
  const segerTarget = getNum('segerTarget');
  const segerActual = getNum('segerActual');
  const segerAcvVal = acv(segerActual, segerTarget);
  const segerGap = formatGap(segerActual, segerTarget);

  // CEMILAN CEBAN
  const cemilanTarget = getNum('cemilanTarget');
  const cemilanActual = getNum('cemilanActual');
  const cemilanAcvVal = acv(cemilanActual, cemilanTarget);
  const cemilanGap = formatGap(cemilanActual, cemilanTarget);

  const laporan =
`*LAPORAN SHIFT ${shift}*

Kode toko : ${kode}
Nama toko : ${nama}
Tanggal   : ${tanggal}
Pejabat   : ${pejabat}
Kasir     : ${kasir}

SHIFT : ${shift}

*SALES*
- Target shift 1 : Rp ${formatWithDots(salesT1)}
- Target shift 2 : Rp ${formatWithDots(salesT2)}
- Actual         : Rp ${formatWithDots(salesA)}
- Acv%           : ${salesAcv}%
- Gap            : ${salesGap}

*1. #PSM#
- Target QTY shift 1 : ${psmT1}
- Target QTY shift 2 : ${psmT2}
- Actual             : ${psmA}
- Acv%               : ${psmAcvVal}%
- Gap                : ${psmGap}

*2. #PWP#
- Target QTY shift 1 : ${pwpT1}
- Target QTY shift 2 : ${pwpT2}
- Actual             : ${pwpA}
- Acv%               : ${pwpAcvVal}%
- Gap                : ${pwpGap}

*3. #SERBA GRATIS#
- Target paket shift 1 : ${sgT1}
- Target paket shift 2 : ${sgT2}
- Actual               : ${sgA}
- Acv%                 : ${sgAcvVal}%
- Gap                  : ${sgGap}

*4. Pulsa / Paket*
- Target Rp shift 1 : Rp ${formatWithDots(pulsaT1)}
- Target Rp shift 2 : Rp ${formatWithDots(pulsaT2)}
- Actual            : Rp ${formatWithDots(pulsaA)}
- Acv%              : ${pulsaAcvVal}%
- Gap               : ${pulsaGap}

*5. #STRUK MEMBER#
- Jumlah Struk : ${strukTotal}
- Struk Member : ${strukMember}
- Acv%         : ${smAcv}%

*6. #NEW MEMBER#
- Target : ${nmTarget}
- Actual : ${nmActual}
- Acv%   : ${nmAcvVal}%
- Gap    : ${nmGap}

*7. #SEGER#
- Target : ${segerTarget}
- Actual : ${segerActual}
- Acv%   : ${segerAcvVal}%
- Gap    : ${segerGap}

*8. #CEMILAN CEBAN#
- Target : ${cemilanTarget}
- Actual : ${cemilanActual}
- Acv%   : ${cemilanAcvVal}%
- Gap    : ${cemilanGap}`;

  document.getElementById('outputText').value = laporan;
}

/* COPY & WA */
async function copyLaporan() {
  const text = document.getElementById('outputText').value || '';
  if (!text.trim()) {
    alert('Belum ada laporan. Klik Generate dulu.');
    return;
  }
  try {
    await navigator.clipboard.writeText(text);
    alert('Laporan sudah di-copy. Tinggal paste di WA.');
  } catch (e) {
    console.error(e);
    alert('Clipboard tidak mendukung. Silakan pilih manual dan copy.');
  }
}

function openWhatsAppGroup() {
  const url = "https://chat.whatsapp.com/LPom9vftZWN141AnFfhMwH";
  window.open(url, "_blank");
}
</script>
</body>
</html>
